\hypertarget{edge__range_8hpp_source}{}\doxysection{edge\+\_\+range.\+hpp}
\label{edge__range_8hpp_source}\index{/Users/lums/NWmath/NWgr/include/nwgraph/adaptors/edge\_range.hpp@{/Users/lums/NWmath/NWgr/include/nwgraph/adaptors/edge\_range.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// }}
\DoxyCodeLine{2 \textcolor{comment}{// This file is part of NW Graph (aka GraphPack) }}
\DoxyCodeLine{3 \textcolor{comment}{// (c) Pacific Northwest National Laboratory 2018-\/2021 }}
\DoxyCodeLine{4 \textcolor{comment}{// (c) University of Washington 2018-\/2021 }}
\DoxyCodeLine{5 \textcolor{comment}{// }}
\DoxyCodeLine{6 \textcolor{comment}{// Licensed under terms of include LICENSE file }}
\DoxyCodeLine{7 \textcolor{comment}{// }}
\DoxyCodeLine{8 \textcolor{comment}{// Authors: }}
\DoxyCodeLine{9 \textcolor{comment}{//     Andrew Lumsdaine }}
\DoxyCodeLine{10 \textcolor{comment}{//     Kevin Deweese    }}
\DoxyCodeLine{11 \textcolor{comment}{//     Luke D'Alessandro    }}
\DoxyCodeLine{12 \textcolor{comment}{//     Luke Dalessandro }}
\DoxyCodeLine{13 \textcolor{comment}{//}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{preprocessor}{\#ifndef NW\_GRAPH\_EDGE\_RANGE\_HPP}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#define NW\_GRAPH\_EDGE\_RANGE\_HPP}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include "{}nwgraph/graph\_concepts.hpp"{}}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}nwgraph/util/arrow\_proxy.hpp"{}}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include "{}nwgraph/util/print\_types.hpp"{}}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include "{}nwgraph/util/util.hpp"{}}}
\DoxyCodeLine{22 \textcolor{comment}{//\#include <tbb/tbb\_stddef.h>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <tuple>}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include <ranges>}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include <utility>}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{keyword}{namespace }nw \{}
\DoxyCodeLine{29 \textcolor{keyword}{namespace }graph \{}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{keyword}{template} <\textcolor{keyword}{class }Graph, std::size\_t... Is>}
\DoxyCodeLine{33 \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}} \{}
\DoxyCodeLine{34   \textcolor{comment}{//  static\_assert(((Is < Graph::getNAttr()) \&\& ...), "{}Attribute index out of range"{});}}
\DoxyCodeLine{35   \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} cutoff\_ = 16;}
\DoxyCodeLine{36 }
\DoxyCodeLine{37   \textcolor{keyword}{using} vertex\_id\_type = vertex\_id\_t<Graph>;}
\DoxyCodeLine{38 }
\DoxyCodeLine{39   \textcolor{keyword}{using} graph\_iterator       = std::conditional\_t<std::is\_const\_v<Graph>, const\_iterator\_t<const Graph>, iterator\_t<Graph>>;}
\DoxyCodeLine{40   \textcolor{keyword}{using} graph\_inner\_iterator = std::conditional\_t<std::is\_const\_v<Graph>, inner\_const\_iterator\_t<Graph>, inner\_iterator\_t<Graph>>;}
\DoxyCodeLine{41 }
\DoxyCodeLine{42   graph\_iterator outer\_base\_;}
\DoxyCodeLine{43   graph\_iterator outer\_begin\_;}
\DoxyCodeLine{44   graph\_iterator outer\_end\_;}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{keyword}{public}:}
\DoxyCodeLine{47   \mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}(Graph\& g, std::size\_t offset, std::index\_sequence<Is...> = \{\})}
\DoxyCodeLine{48       : outer\_base\_(g.begin()), outer\_begin\_(g.begin() + offset), outer\_end\_(g.end()) \{\}}
\DoxyCodeLine{49 }
\DoxyCodeLine{50   \mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}(Graph\& g, std::index\_sequence<Is...> is = \{\}) : \mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}(g, 0, is) \{\}}
\DoxyCodeLine{51 }
\DoxyCodeLine{52   \textcolor{comment}{// Split a range.}}
\DoxyCodeLine{53   \mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}(\mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}\& b, tbb::split) : \mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}(b) \{}
\DoxyCodeLine{54     \textcolor{keyword}{auto} i = (outer\_end\_ -\/ outer\_begin\_) / 2;}
\DoxyCodeLine{55     outer\_begin\_ += i;}
\DoxyCodeLine{56     b.outer\_end\_ = b.outer\_begin\_ + i;}
\DoxyCodeLine{57   \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59   \textcolor{comment}{// Copy constructors and assignment operators are fine.}}
\DoxyCodeLine{60   \mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{61   \mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}\& operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range}{edge\_range}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63   \textcolor{keyword}{template} <\textcolor{keywordtype}{bool} is\_const>}
\DoxyCodeLine{64   \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}} \{}
\DoxyCodeLine{65   \textcolor{keyword}{public}:}
\DoxyCodeLine{66     \textcolor{keyword}{using} iterator\_category = std::forward\_iterator\_tag;}
\DoxyCodeLine{67     \textcolor{keyword}{using} value\_type        = std::tuple<}
\DoxyCodeLine{68       vertex\_id\_type, vertex\_id\_type,}
\DoxyCodeLine{69       \textcolor{keyword}{typename} std::tuple\_element\_t<Is, std::conditional\_t<is\_const, const attributes\_t<Graph>, attributes\_t<Graph>>> ...>;}
\DoxyCodeLine{70     \textcolor{keyword}{using} difference\_type = std::ptrdiff\_t;}
\DoxyCodeLine{71     \textcolor{keyword}{using} reference       = std::tuple<}
\DoxyCodeLine{72         vertex\_id\_type, vertex\_id\_type,}
\DoxyCodeLine{73       \textcolor{keyword}{typename} std::tuple\_element\_t<Is, std::conditional\_t<is\_const, const attributes\_t<Graph>, attributes\_t<Graph>>>\&...>;}
\DoxyCodeLine{74     \textcolor{keyword}{using} \mbox{\hyperlink{structnw_1_1graph_1_1arrow__proxy}{pointer}} = \mbox{\hyperlink{structnw_1_1graph_1_1arrow__proxy}{arrow\_proxy<reference>}};}
\DoxyCodeLine{75 }
\DoxyCodeLine{76   \textcolor{keyword}{private}:}
\DoxyCodeLine{77     graph\_iterator       base\_;            }
\DoxyCodeLine{78     graph\_iterator       first\_;           }
\DoxyCodeLine{79     graph\_iterator       last\_;            }
\DoxyCodeLine{80     graph\_inner\_iterator u\_begin\_ = \{\};    }
\DoxyCodeLine{81     graph\_inner\_iterator u\_end\_   = \{\};    }
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\& b, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} step) : \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}(b) \{ first\_ += step; \}}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{keywordtype}{void} check() \{}
\DoxyCodeLine{86       \textcolor{keywordflow}{while} (u\_begin\_ == u\_end\_ \&\& first\_ != last\_) \{    \textcolor{comment}{// make sure we start at a valid dereference point}}
\DoxyCodeLine{87         \textcolor{keywordflow}{if} (++first\_ != last\_) \{}
\DoxyCodeLine{88           u\_begin\_ = (*first\_).begin();}
\DoxyCodeLine{89           u\_end\_   = (*first\_).end();}
\DoxyCodeLine{90         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{break};}
\DoxyCodeLine{91       \}}
\DoxyCodeLine{92     \}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94   \textcolor{keyword}{public}:}
\DoxyCodeLine{95     \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}(graph\_iterator base, graph\_iterator begin, graph\_iterator end)}
\DoxyCodeLine{96         : base\_(base)}
\DoxyCodeLine{97         , first\_(begin)}
\DoxyCodeLine{98         , last\_(end)}
\DoxyCodeLine{99     \{}
\DoxyCodeLine{100       \textcolor{keywordflow}{if} (first\_ != last\_) \{}
\DoxyCodeLine{101         u\_begin\_ = (*first\_).begin();}
\DoxyCodeLine{102         u\_end\_   = (*first\_).end();}
\DoxyCodeLine{103         check();}
\DoxyCodeLine{104       \}}
\DoxyCodeLine{105     \}}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{108     \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator<false>}}\& rhs) \textcolor{keyword}{requires}(is\_const)}
\DoxyCodeLine{109       : base\_(rhs.base\_)}
\DoxyCodeLine{110       , first\_(rhs.first\_)}
\DoxyCodeLine{111       , last\_(rhs.last\_)}
\DoxyCodeLine{112       , u\_begin\_(rhs.u\_begin\_)}
\DoxyCodeLine{113       , u\_end\_(rhs.u\_end\_)}
\DoxyCodeLine{114     \{}
\DoxyCodeLine{115     \}}
\DoxyCodeLine{116 }
\DoxyCodeLine{117     \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\& operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{118     \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\& operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator<false>}}\& rhs) \textcolor{keyword}{requires}(is\_const)}
\DoxyCodeLine{119     \{}
\DoxyCodeLine{120       base\_    = rhs.base\_;}
\DoxyCodeLine{121       first\_   = rhs.first\_;}
\DoxyCodeLine{122       last\_    = rhs.last\_;}
\DoxyCodeLine{123       u\_begin\_ = rhs.u\_begin\_;}
\DoxyCodeLine{124       u\_end\_   = rhs.u\_end\_;}
\DoxyCodeLine{125       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{126     \}}
\DoxyCodeLine{127 }
\DoxyCodeLine{128     \textcolor{keyword}{friend} \textcolor{keywordtype}{bool} operator==(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\& a, \textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\& b) \{}
\DoxyCodeLine{129       \textcolor{keywordflow}{return} a.first\_ == b.first\_;}
\DoxyCodeLine{130     \}}
\DoxyCodeLine{131 }
\DoxyCodeLine{132     \textcolor{keyword}{friend} \textcolor{keyword}{auto} operator<=>(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\& a, \textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\& b) \{}
\DoxyCodeLine{133       \textcolor{keywordflow}{return} a.first\_ <=> b.first\_;}
\DoxyCodeLine{134     \}}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\& operator++() \{}
\DoxyCodeLine{137 }
\DoxyCodeLine{138       ++u\_begin\_;}
\DoxyCodeLine{139 }
\DoxyCodeLine{140       check();}
\DoxyCodeLine{141       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{142     \}}
\DoxyCodeLine{143 }
\DoxyCodeLine{144     \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}} operator++(\textcolor{keywordtype}{int})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{145       \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}} it = *\textcolor{keyword}{this};}
\DoxyCodeLine{146       ++(*this);}
\DoxyCodeLine{147       \textcolor{keywordflow}{return} it;}
\DoxyCodeLine{148     \}}
\DoxyCodeLine{149 }
\DoxyCodeLine{150     reference operator*()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} reference(first\_ -\/ base\_, std::get<0>(*u\_begin\_), std::ref(std::get<Is + 1>(*u\_begin\_))...); \}}
\DoxyCodeLine{151 }
\DoxyCodeLine{152     \mbox{\hyperlink{structnw_1_1graph_1_1arrow__proxy}{pointer}} operator-\/>()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \{**\textcolor{keyword}{this}\}; \}}
\DoxyCodeLine{153 }
\DoxyCodeLine{154     difference\_type operator-\/(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}\& b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} first\_ -\/ b.first\_; \}}
\DoxyCodeLine{155     \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}     operator+(difference\_type step)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator}}(*\textcolor{keyword}{this}, step); \}}
\DoxyCodeLine{156   \};}
\DoxyCodeLine{157 }
\DoxyCodeLine{158   \textcolor{keyword}{using} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{iterator}}       = \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator<false>}};}
\DoxyCodeLine{159   \textcolor{keyword}{using} \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{const\_iterator}} = \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{my\_iterator<true>}};}
\DoxyCodeLine{160 }
\DoxyCodeLine{161   \mbox{\hyperlink{classnw_1_1graph_1_1edge__range_1_1my__iterator}{iterator}}       begin() \{ \textcolor{keywordflow}{return} \{outer\_base\_, outer\_begin\_, outer\_end\_\}; \}}
\DoxyCodeLine{162   const\_iterator begin()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \{outer\_base\_, outer\_begin\_, outer\_end\_\}; \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164   iterator       end() \{ \textcolor{keywordflow}{return} \{outer\_base\_, outer\_end\_, outer\_end\_\}; \}}
\DoxyCodeLine{165   const\_iterator end()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \{outer\_base\_, outer\_end\_, outer\_end\_\}; \}}
\DoxyCodeLine{166 }
\DoxyCodeLine{167   std::size\_t size()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} outer\_end\_ -\/ outer\_begin\_; \}}
\DoxyCodeLine{168   \textcolor{keywordtype}{bool}        empty()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} begin() == end(); \}}
\DoxyCodeLine{169   \textcolor{keywordtype}{bool}        is\_divisible()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} size() > cutoff\_; \}}
\DoxyCodeLine{170 \};}
\DoxyCodeLine{171 }
\DoxyCodeLine{172 \textcolor{keyword}{template} <std::size\_t... Is, \textcolor{keyword}{class }Graph>}
\DoxyCodeLine{173 \textcolor{keyword}{static} \textcolor{keyword}{inline} edge\_range<Graph, Is...> make\_edge\_range(Graph\& g, std::size\_t offset) \{}
\DoxyCodeLine{174   \textcolor{keywordflow}{return} \{g, offset\};}
\DoxyCodeLine{175 \}}
\DoxyCodeLine{176 }
\DoxyCodeLine{177 \textcolor{keyword}{template} <std::size\_t... Is, \textcolor{keyword}{class }Graph>}
\DoxyCodeLine{178 \textcolor{keyword}{static} \textcolor{keyword}{inline} edge\_range<Graph, Is...> make\_edge\_range(Graph\& g) \{}
\DoxyCodeLine{179   \textcolor{keywordflow}{return} \{g\};}
\DoxyCodeLine{180 \}}
\DoxyCodeLine{181 }
\DoxyCodeLine{182 \textcolor{keyword}{template} <std::size\_t... Is, \textcolor{keyword}{class }Graph>}
\DoxyCodeLine{183 \textcolor{keyword}{static} \textcolor{keyword}{inline} edge\_range<Graph, Is...> make\_edge\_range(Graph\&\& g) \{}
\DoxyCodeLine{184   \textcolor{keywordflow}{return} \{g\};}
\DoxyCodeLine{185 \}}
\DoxyCodeLine{186 }
\DoxyCodeLine{187 \}    \textcolor{comment}{// namespace graph}}
\DoxyCodeLine{188 \}    \textcolor{comment}{// namespace nw}}
\DoxyCodeLine{189 }
\DoxyCodeLine{190 \textcolor{preprocessor}{\#endif    }\textcolor{comment}{// EDGE\_RANGE\_HPP}}

\end{DoxyCode}
