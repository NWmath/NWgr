\hypertarget{worklist_8hpp_source}{}\doxysection{worklist.\+hpp}
\label{worklist_8hpp_source}\index{/Users/lums/NWmath/NWgr/include/nwgraph/adaptors/worklist.hpp@{/Users/lums/NWmath/NWgr/include/nwgraph/adaptors/worklist.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// }}
\DoxyCodeLine{2 \textcolor{comment}{// This file is part of NW Graph (aka GraphPack) }}
\DoxyCodeLine{3 \textcolor{comment}{// (c) Pacific Northwest National Laboratory 2018-\/2021 }}
\DoxyCodeLine{4 \textcolor{comment}{// (c) University of Washington 2018-\/2021 }}
\DoxyCodeLine{5 \textcolor{comment}{// }}
\DoxyCodeLine{6 \textcolor{comment}{// Licensed under terms of include LICENSE file }}
\DoxyCodeLine{7 \textcolor{comment}{// }}
\DoxyCodeLine{8 \textcolor{comment}{// Authors: }}
\DoxyCodeLine{9 \textcolor{comment}{//     Andrew Lumsdaine }}
\DoxyCodeLine{10 \textcolor{comment}{//     Kevin Deweese    }}
\DoxyCodeLine{11 \textcolor{comment}{//     Luke D'Alessandro    }}
\DoxyCodeLine{12 \textcolor{comment}{//}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#ifndef NW\_GRAPH\_WORKLIST\_HPP}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#define NW\_GRAPH\_WORKLIST\_HPP}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include "{}tbb/concurrent\_priority\_queue.h"{}}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include "{}tbb/concurrent\_queue.h"{}}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}tbb/concurrent\_vector.h"{}}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include "{}nwgraph/util/util.hpp"{}}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <list>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <queue>}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{keyword}{namespace }nw \{}
\DoxyCodeLine{28 \textcolor{keyword}{namespace }graph \{}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{comment}{//****************************************************************************}}
\DoxyCodeLine{31 \textcolor{comment}{//template<typename Graph, typename Workitem = vertex\_id\_type, typename Queue = tbb::concurrent\_queue<Workitem> >}}
\DoxyCodeLine{32 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Graph, \textcolor{keyword}{typename} Workitem = \textcolor{keyword}{typename} Graph::vertex\_\textcolor{keywordtype}{id}\_type, \textcolor{keyword}{typename} Queue = std::queue<Workitem>>}
\DoxyCodeLine{33 \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1worklist__range}{worklist\_range}} \{}
\DoxyCodeLine{34 \textcolor{keyword}{public}:}
\DoxyCodeLine{35   \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range}{worklist\_range}}(Graph\& graph) : the\_graph\_(graph) \{\}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37   \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range}{worklist\_range}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range}{worklist\_range}}\&)  = \textcolor{keyword}{delete};}
\DoxyCodeLine{38   \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range}{worklist\_range}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range}{worklist\_range}}\&\&) = \textcolor{keyword}{delete};}
\DoxyCodeLine{39 }
\DoxyCodeLine{40   \textcolor{keywordtype}{bool} empty() \{ \textcolor{keywordflow}{return} Q\_.empty(); \}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42   \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1worklist__range_1_1worklist__range__iterator}{worklist\_range\_iterator}} \{}
\DoxyCodeLine{43   \textcolor{keyword}{public}:}
\DoxyCodeLine{44     \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range_1_1worklist__range__iterator}{worklist\_range\_iterator}}(\mbox{\hyperlink{classnw_1_1graph_1_1worklist__range}{worklist\_range<Graph, Workitem>}}\& range) : the\_range\_(range) \{\}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46     \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range_1_1worklist__range__iterator}{worklist\_range\_iterator}}\& operator++() \{}
\DoxyCodeLine{47       the\_range\_.Q\_.pop();}
\DoxyCodeLine{48       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{49     \}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51     \textcolor{keyword}{auto} operator*() \{}
\DoxyCodeLine{52       \textcolor{comment}{//Workitem T;}}
\DoxyCodeLine{53       \textcolor{comment}{//the\_range\_.Q\_.try\_pop(T);}}
\DoxyCodeLine{54       \textcolor{comment}{//return T;}}
\DoxyCodeLine{55       \textcolor{keywordflow}{return} the\_range\_.Q\_.front();}
\DoxyCodeLine{56     \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1worklist__range_1_1worklist__range__iterator_1_1end__sentinel__type}{end\_sentinel\_type}} \{}
\DoxyCodeLine{59     \textcolor{keyword}{public}:}
\DoxyCodeLine{60       \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range_1_1worklist__range__iterator_1_1end__sentinel__type}{end\_sentinel\_type}}() \{\}}
\DoxyCodeLine{61     \};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63     \textcolor{keyword}{auto} operator==(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range_1_1worklist__range__iterator_1_1end__sentinel__type}{end\_sentinel\_type}}\&)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} the\_range\_.empty(); \}}
\DoxyCodeLine{64     \textcolor{keywordtype}{bool} operator!=(\textcolor{keyword}{const} end\_sentinel\_type\&)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} !the\_range\_.empty(); \}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66   \textcolor{keyword}{private}:}
\DoxyCodeLine{67     \mbox{\hyperlink{classnw_1_1graph_1_1worklist__range}{worklist\_range<Graph, Workitem>}}\& the\_range\_;}
\DoxyCodeLine{68   \};}
\DoxyCodeLine{69 }
\DoxyCodeLine{70   \textcolor{keyword}{typedef} worklist\_range\_iterator iterator;}
\DoxyCodeLine{71 }
\DoxyCodeLine{72   \textcolor{keyword}{auto} begin() \{ \textcolor{keywordflow}{return} worklist\_range\_iterator(*\textcolor{keyword}{this}); \}}
\DoxyCodeLine{73   \textcolor{keyword}{auto} end() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{typename} worklist\_range\_iterator::end\_sentinel\_type(); \}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75   \textcolor{keywordtype}{void} push\_back(Workitem work) \{ Q\_.push(work); \}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77 \textcolor{keyword}{private}:}
\DoxyCodeLine{78   Graph\& the\_graph\_;}
\DoxyCodeLine{79   Queue  Q\_;}
\DoxyCodeLine{80 \};}
\DoxyCodeLine{81 }
\DoxyCodeLine{82 \textcolor{comment}{//****************************************************************************}}
\DoxyCodeLine{83 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Graph, \textcolor{keyword}{typename} Workitem = \textcolor{keyword}{typename} Graph::vertex\_\textcolor{keywordtype}{id}\_type, \textcolor{keyword}{typename} Queue = tbb::concurrent\_queue<Workitem>>}
\DoxyCodeLine{84 \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range}{tbbworklist\_range}} \{}
\DoxyCodeLine{85 \textcolor{keyword}{public}:}
\DoxyCodeLine{86   \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range}{tbbworklist\_range}}(Graph\& graph) : the\_graph\_(graph) \{\}}
\DoxyCodeLine{87 }
\DoxyCodeLine{88   \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range}{tbbworklist\_range}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range}{tbbworklist\_range}}\&)  = \textcolor{keyword}{delete};}
\DoxyCodeLine{89   \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range}{tbbworklist\_range}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range}{tbbworklist\_range}}\&\&) = \textcolor{keyword}{delete};}
\DoxyCodeLine{90 }
\DoxyCodeLine{91   \textcolor{keywordtype}{bool} empty() \{ \textcolor{keywordflow}{return} Q\_.unsafe\_size() == 0; \}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93   \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range_1_1tbbworklist__range__iterator}{tbbworklist\_range\_iterator}} \{}
\DoxyCodeLine{94   \textcolor{keyword}{public}:}
\DoxyCodeLine{95     \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range_1_1tbbworklist__range__iterator}{tbbworklist\_range\_iterator}}(\mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range}{tbbworklist\_range<Graph, Workitem, Queue>}}\& range) : the\_range\_(range) \{}
\DoxyCodeLine{96       item = the\_range\_.dummy\_;}
\DoxyCodeLine{97       the\_range\_.Q\_.try\_pop(item);}
\DoxyCodeLine{98     \}}
\DoxyCodeLine{99 }
\DoxyCodeLine{100     \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range_1_1tbbworklist__range__iterator}{tbbworklist\_range\_iterator}}\& operator++() \{}
\DoxyCodeLine{101       item = the\_range\_.dummy\_;}
\DoxyCodeLine{102       the\_range\_.Q\_.try\_pop(item);}
\DoxyCodeLine{103       \textcolor{comment}{//the\_range\_.Q\_.pop();}}
\DoxyCodeLine{104       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{105     \}}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \textcolor{keyword}{auto}\& operator*() \{}
\DoxyCodeLine{108       \textcolor{comment}{/*std::vector<Workitem> buffer;}}
\DoxyCodeLine{109 \textcolor{comment}{      buffer.reserve(10);}}
\DoxyCodeLine{110 \textcolor{comment}{      Workitem T = the\_range\_.dummy\_;}}
\DoxyCodeLine{111 \textcolor{comment}{      for(size\_t i = 0; i < 10; ++i) \{}}
\DoxyCodeLine{112 \textcolor{comment}{        if(the\_range\_.Q\_.try\_pop(T))}}
\DoxyCodeLine{113 \textcolor{comment}{          buffer.push\_back(T);}}
\DoxyCodeLine{114 \textcolor{comment}{      \}}}
\DoxyCodeLine{115 \textcolor{comment}{      return buffer;*/}}
\DoxyCodeLine{116       \textcolor{keywordflow}{return} item;}
\DoxyCodeLine{117       \textcolor{comment}{//return the\_range\_.Q\_.front();}}
\DoxyCodeLine{118     \}}
\DoxyCodeLine{119 }
\DoxyCodeLine{120     \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range_1_1tbbworklist__range__iterator_1_1end__sentinel__type}{end\_sentinel\_type}} \{}
\DoxyCodeLine{121     \textcolor{keyword}{public}:}
\DoxyCodeLine{122       \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range_1_1tbbworklist__range__iterator_1_1end__sentinel__type}{end\_sentinel\_type}}() \{\}}
\DoxyCodeLine{123     \};}
\DoxyCodeLine{124 }
\DoxyCodeLine{125     \textcolor{keyword}{auto} operator==(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range_1_1tbbworklist__range__iterator_1_1end__sentinel__type}{end\_sentinel\_type}}\&)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} the\_range\_.empty(); \}}
\DoxyCodeLine{126     \textcolor{keywordtype}{bool} operator!=(\textcolor{keyword}{const} end\_sentinel\_type\&)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} !the\_range\_.empty(); \}}
\DoxyCodeLine{127 }
\DoxyCodeLine{128   \textcolor{keyword}{private}:}
\DoxyCodeLine{129     \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range}{tbbworklist\_range<Graph, Workitem, Queue>}}\& the\_range\_;}
\DoxyCodeLine{130     Workitem                                   item;}
\DoxyCodeLine{131   \};}
\DoxyCodeLine{132 }
\DoxyCodeLine{133   \textcolor{keyword}{typedef} tbbworklist\_range\_iterator iterator;}
\DoxyCodeLine{134 }
\DoxyCodeLine{135   \textcolor{keyword}{auto} begin() \{ \textcolor{keywordflow}{return} tbbworklist\_range\_iterator(*\textcolor{keyword}{this}); \}}
\DoxyCodeLine{136   \textcolor{keyword}{auto} end() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{typename} tbbworklist\_range\_iterator::end\_sentinel\_type(); \}}
\DoxyCodeLine{137 }
\DoxyCodeLine{138   \textcolor{keywordtype}{void} push\_back(Workitem work) \{ Q\_.push(work); \}}
\DoxyCodeLine{139   \textcolor{keywordtype}{void} set\_dummy(Workitem dummy) \{ dummy\_ = dummy; \}}
\DoxyCodeLine{140 }
\DoxyCodeLine{141 \textcolor{keyword}{private}:}
\DoxyCodeLine{142   Graph\&   the\_graph\_;}
\DoxyCodeLine{143   Queue    Q\_;}
\DoxyCodeLine{144   Workitem dummy\_;}
\DoxyCodeLine{145 \};}
\DoxyCodeLine{146 }
\DoxyCodeLine{147 \textcolor{comment}{//****************************************************************************}}
\DoxyCodeLine{148 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Graph, \textcolor{keyword}{typename} Workitem = \textcolor{keyword}{typename} Graph::vertex\_\textcolor{keywordtype}{id}\_type, \textcolor{keyword}{typename} Queue = tbb::concurrent\_queue<Workitem>>}
\DoxyCodeLine{149 \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2}{tbbworklist\_range2}} \{}
\DoxyCodeLine{150 \textcolor{keyword}{public}:}
\DoxyCodeLine{151   \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2}{tbbworklist\_range2}}(Graph\& graph) : the\_graph\_(graph), buckets\_(10000) \{\}}
\DoxyCodeLine{152 }
\DoxyCodeLine{153   \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2}{tbbworklist\_range2}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2}{tbbworklist\_range2}}\&)  = \textcolor{keyword}{delete};}
\DoxyCodeLine{154   \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2}{tbbworklist\_range2}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2}{tbbworklist\_range2}}\&\&) = \textcolor{keyword}{delete};}
\DoxyCodeLine{155 }
\DoxyCodeLine{156   \textcolor{keywordtype}{bool} empty() \{}
\DoxyCodeLine{157     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < buckets\_.size(); ++i) \{}
\DoxyCodeLine{158       \textcolor{comment}{/*if(buckets\_[i].unsafe\_size() > 0) \{}}
\DoxyCodeLine{159 \textcolor{comment}{        return false;}}
\DoxyCodeLine{160 \textcolor{comment}{      \}*/}}
\DoxyCodeLine{161       \textcolor{keywordflow}{if} (!buckets\_[i].empty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{162     \}}
\DoxyCodeLine{163     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{164     \textcolor{comment}{//return (counter == 0);}}
\DoxyCodeLine{165   \}}
\DoxyCodeLine{166 }
\DoxyCodeLine{167   \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2_1_1tbbworklist__range__iterator2}{tbbworklist\_range\_iterator2}} \{}
\DoxyCodeLine{168   \textcolor{keyword}{public}:}
\DoxyCodeLine{169     \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2_1_1tbbworklist__range__iterator2}{tbbworklist\_range\_iterator2}}(\mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2}{tbbworklist\_range2<Graph, Workitem, Queue>}}\& range) : the\_range\_(range) \{}
\DoxyCodeLine{170       \textcolor{comment}{/*buffer\_.reserve(1000);}}
\DoxyCodeLine{171 \textcolor{comment}{      Workitem T = the\_range\_.dummy\_;}}
\DoxyCodeLine{172 \textcolor{comment}{      for(size\_t i = 0; i < the\_range\_.buckets\_.size(); ++i) \{}}
\DoxyCodeLine{173 \textcolor{comment}{        if(the\_range\_.buckets\_[i].try\_pop(T)) \{}}
\DoxyCodeLine{174 \textcolor{comment}{          buffer\_.push\_back(T);}}
\DoxyCodeLine{175 \textcolor{comment}{          -\/-\/the\_range\_.counter;}}
\DoxyCodeLine{176 \textcolor{comment}{          if(buffer\_.size()>1000)}}
\DoxyCodeLine{177 \textcolor{comment}{            break;}}
\DoxyCodeLine{178 \textcolor{comment}{        \}}}
\DoxyCodeLine{179 \textcolor{comment}{      \}*/}}
\DoxyCodeLine{180       workunit = the\_range\_.dummy\_;}
\DoxyCodeLine{181       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < the\_range\_.buckets\_.size(); ++i) \{}
\DoxyCodeLine{182         \textcolor{keywordflow}{if} (the\_range\_.buckets\_[i].try\_pop(workunit)) \textcolor{keywordflow}{break};}
\DoxyCodeLine{183       \}}
\DoxyCodeLine{184     \}}
\DoxyCodeLine{185 }
\DoxyCodeLine{186     \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2_1_1tbbworklist__range__iterator2}{tbbworklist\_range\_iterator2}}\& operator++() \{}
\DoxyCodeLine{187       \textcolor{comment}{/*buffer\_.clear();}}
\DoxyCodeLine{188 \textcolor{comment}{      Workitem T = the\_range\_.dummy\_;}}
\DoxyCodeLine{189 \textcolor{comment}{      for(size\_t i = 0; i < the\_range\_.buckets\_.size(); ++i) \{}}
\DoxyCodeLine{190 \textcolor{comment}{        if(the\_range\_.buckets\_[i].try\_pop(T)) \{}}
\DoxyCodeLine{191 \textcolor{comment}{          buffer\_.push\_back(T);}}
\DoxyCodeLine{192 \textcolor{comment}{          -\/-\/the\_range\_.counter;}}
\DoxyCodeLine{193 \textcolor{comment}{          if(buffer\_.size()>1000)}}
\DoxyCodeLine{194 \textcolor{comment}{            return *this;}}
\DoxyCodeLine{195 \textcolor{comment}{        \}}}
\DoxyCodeLine{196 \textcolor{comment}{      \}*/}}
\DoxyCodeLine{197       workunit = the\_range\_.dummy\_;}
\DoxyCodeLine{198       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < the\_range\_.buckets\_.size(); ++i) \{}
\DoxyCodeLine{199         \textcolor{keywordflow}{if} (the\_range\_.buckets\_[i].try\_pop(workunit)) \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{200       \}}
\DoxyCodeLine{201       \textcolor{comment}{//the\_range\_.Q\_.pop();}}
\DoxyCodeLine{202       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{203     \}}
\DoxyCodeLine{204 }
\DoxyCodeLine{205     \textcolor{keyword}{auto}\& operator*() \{}
\DoxyCodeLine{206       \textcolor{keywordflow}{return} workunit;}
\DoxyCodeLine{207       \textcolor{comment}{//return buffer\_;}}
\DoxyCodeLine{208       \textcolor{comment}{//return the\_range\_.Q\_.front();}}
\DoxyCodeLine{209     \}}
\DoxyCodeLine{210 }
\DoxyCodeLine{211     \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2_1_1tbbworklist__range__iterator2_1_1end__sentinel__type}{end\_sentinel\_type}} \{}
\DoxyCodeLine{212     \textcolor{keyword}{public}:}
\DoxyCodeLine{213       \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2_1_1tbbworklist__range__iterator2_1_1end__sentinel__type}{end\_sentinel\_type}}() \{\}}
\DoxyCodeLine{214     \};}
\DoxyCodeLine{215 }
\DoxyCodeLine{216     \textcolor{keyword}{auto} operator==(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2_1_1tbbworklist__range__iterator2_1_1end__sentinel__type}{end\_sentinel\_type}}\&)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} the\_range\_.empty(); \}}
\DoxyCodeLine{217     \textcolor{keywordtype}{bool} operator!=(\textcolor{keyword}{const} end\_sentinel\_type\&)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} !the\_range\_.empty(); \}}
\DoxyCodeLine{218 }
\DoxyCodeLine{219   \textcolor{keyword}{private}:}
\DoxyCodeLine{220     \mbox{\hyperlink{classnw_1_1graph_1_1tbbworklist__range2}{tbbworklist\_range2<Graph, Workitem, Queue>}}\& the\_range\_;}
\DoxyCodeLine{221     \textcolor{comment}{//tbb::concurrent\_vector<Workitem> buffer\_;}}
\DoxyCodeLine{222     Workitem workunit;}
\DoxyCodeLine{223   \};}
\DoxyCodeLine{224 }
\DoxyCodeLine{225   \textcolor{keyword}{typedef} tbbworklist\_range\_iterator2 iterator;}
\DoxyCodeLine{226 }
\DoxyCodeLine{227   \textcolor{keyword}{auto} begin() \{ \textcolor{keywordflow}{return} tbbworklist\_range\_iterator2(*\textcolor{keyword}{this}); \}}
\DoxyCodeLine{228   \textcolor{keyword}{auto} end() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{typename} tbbworklist\_range\_iterator2::end\_sentinel\_type(); \}}
\DoxyCodeLine{229 }
\DoxyCodeLine{230   \textcolor{keywordtype}{void} push\_back(Workitem work, \textcolor{keywordtype}{size\_t} level) \{}
\DoxyCodeLine{231     \textcolor{keywordflow}{if} (level + 1 > buckets\_.size()) \{}
\DoxyCodeLine{232       buckets\_.grow\_to\_at\_least(level + 1);}
\DoxyCodeLine{233     \}}
\DoxyCodeLine{234 }
\DoxyCodeLine{235     \textcolor{comment}{//std::cout << level << "{} "{} << buckets\_.size() << std::endl;}}
\DoxyCodeLine{236     buckets\_[level].push(work);}
\DoxyCodeLine{237     \textcolor{comment}{//Q\_.push(work);}}
\DoxyCodeLine{238     \textcolor{comment}{//std::cout << "{}pushed"{} << std::endl;}}
\DoxyCodeLine{239     \textcolor{comment}{//counter++;}}
\DoxyCodeLine{240   \}}
\DoxyCodeLine{241   \textcolor{keywordtype}{void} set\_dummy(Workitem dummy) \{ dummy\_ = dummy; \}}
\DoxyCodeLine{242 }
\DoxyCodeLine{243 \textcolor{keyword}{private}:}
\DoxyCodeLine{244   Graph\&                        the\_graph\_;}
\DoxyCodeLine{245   tbb::concurrent\_vector<Queue> buckets\_;}
\DoxyCodeLine{246   Workitem                      dummy\_;}
\DoxyCodeLine{247   \textcolor{comment}{//std::atomic<int> counter;}}
\DoxyCodeLine{248 \};}
\DoxyCodeLine{249 }
\DoxyCodeLine{250 \}    \textcolor{comment}{// namespace graph}}
\DoxyCodeLine{251 \}    \textcolor{comment}{// namespace nw}}
\DoxyCodeLine{252 }
\DoxyCodeLine{253 \textcolor{preprocessor}{\#endif    }\textcolor{comment}{//  NW\_GRAPH\_WORKLIST\_HPP}}

\end{DoxyCode}
