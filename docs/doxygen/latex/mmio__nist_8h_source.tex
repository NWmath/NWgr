\hypertarget{mmio__nist_8h_source}{}\doxysection{mmio\+\_\+nist.\+h}
\label{mmio__nist_8h_source}\index{/Users/lums/NWmath/NWgr/include/nwgraph/io/mmio\_nist.h@{/Users/lums/NWmath/NWgr/include/nwgraph/io/mmio\_nist.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/* }}
\DoxyCodeLine{2 \textcolor{comment}{*   Matrix Market I/O library for ANSI C}}
\DoxyCodeLine{3 \textcolor{comment}{*}}
\DoxyCodeLine{4 \textcolor{comment}{*   See http://math.nist.gov/MatrixMarket for details.}}
\DoxyCodeLine{5 \textcolor{comment}{*}}
\DoxyCodeLine{6 \textcolor{comment}{*}}
\DoxyCodeLine{7 \textcolor{comment}{*/}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#ifndef MM\_IO\_H}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#define MM\_IO\_H}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <ctype.h>}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define MM\_MAX\_LINE\_LENGTH 1025}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define MatrixMarketBanner "{}\%\%MatrixMarket"{}}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#define MM\_MAX\_TOKEN\_LENGTH 64}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} MM\_typecode[4];}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 }
\DoxyCodeLine{24 \textcolor{comment}{/********************* MM\_typecode query fucntions ***************************/}}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{preprocessor}{\#define mm\_is\_matrix(typecode)  ((typecode)[0]=='M')}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{preprocessor}{\#define mm\_is\_sparse(typecode)  ((typecode)[1]=='C')}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#define mm\_is\_coordinate(typecode)((typecode)[1]=='C')}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#define mm\_is\_dense(typecode)   ((typecode)[1]=='A')}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#define mm\_is\_array(typecode)   ((typecode)[1]=='A')}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33 \textcolor{preprocessor}{\#define mm\_is\_complex(typecode) ((typecode)[2]=='C')}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#define mm\_is\_real(typecode)    ((typecode)[2]=='R')}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#define mm\_is\_pattern(typecode) ((typecode)[2]=='P')}}
\DoxyCodeLine{36 \textcolor{preprocessor}{\#define mm\_is\_integer(typecode) ((typecode)[2]=='I')}}
\DoxyCodeLine{37 }
\DoxyCodeLine{38 \textcolor{preprocessor}{\#define mm\_is\_symmetric(typecode)((typecode)[3]=='S')}}
\DoxyCodeLine{39 \textcolor{preprocessor}{\#define mm\_is\_general(typecode) ((typecode)[3]=='G')}}
\DoxyCodeLine{40 \textcolor{preprocessor}{\#define mm\_is\_skew(typecode)    ((typecode)[3]=='K')}}
\DoxyCodeLine{41 \textcolor{preprocessor}{\#define mm\_is\_hermitian(typecode)((typecode)[3]=='H')}}
\DoxyCodeLine{42 }
\DoxyCodeLine{43 \textcolor{keywordtype}{int} mm\_is\_valid(MM\_typecode matcode)}
\DoxyCodeLine{44 \{}
\DoxyCodeLine{45     \textcolor{keywordflow}{if} (!mm\_is\_matrix(matcode)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{46     \textcolor{keywordflow}{if} (mm\_is\_dense(matcode) \&\& mm\_is\_pattern(matcode)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{47     \textcolor{keywordflow}{if} (mm\_is\_real(matcode) \&\& mm\_is\_hermitian(matcode)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{48     \textcolor{keywordflow}{if} (mm\_is\_pattern(matcode) \&\& (mm\_is\_hermitian(matcode) || }
\DoxyCodeLine{49                 mm\_is\_skew(matcode))) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{50     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{51 \}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{comment}{/********************* MM\_typecode modify fucntions ***************************/}}
\DoxyCodeLine{54 }
\DoxyCodeLine{55 \textcolor{preprocessor}{\#define mm\_set\_matrix(typecode) ((*typecode)[0]='M')}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#define mm\_set\_coordinate(typecode) ((*typecode)[1]='C')}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#define mm\_set\_array(typecode)  ((*typecode)[1]='A')}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#define mm\_set\_dense(typecode)  mm\_set\_array(typecode)}}
\DoxyCodeLine{59 \textcolor{preprocessor}{\#define mm\_set\_sparse(typecode) mm\_set\_coordinate(typecode)}}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 \textcolor{preprocessor}{\#define mm\_set\_complex(typecode)((*typecode)[2]='C')}}
\DoxyCodeLine{62 \textcolor{preprocessor}{\#define mm\_set\_real(typecode)   ((*typecode)[2]='R')}}
\DoxyCodeLine{63 \textcolor{preprocessor}{\#define mm\_set\_pattern(typecode)((*typecode)[2]='P')}}
\DoxyCodeLine{64 \textcolor{preprocessor}{\#define mm\_set\_integer(typecode)((*typecode)[2]='I')}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66 }
\DoxyCodeLine{67 \textcolor{preprocessor}{\#define mm\_set\_symmetric(typecode)((*typecode)[3]='S')}}
\DoxyCodeLine{68 \textcolor{preprocessor}{\#define mm\_set\_general(typecode)((*typecode)[3]='G')}}
\DoxyCodeLine{69 \textcolor{preprocessor}{\#define mm\_set\_skew(typecode)   ((*typecode)[3]='K')}}
\DoxyCodeLine{70 \textcolor{preprocessor}{\#define mm\_set\_hermitian(typecode)((*typecode)[3]='H')}}
\DoxyCodeLine{71 }
\DoxyCodeLine{72 \textcolor{preprocessor}{\#define mm\_clear\_typecode(typecode) ((*typecode)[0]=(*typecode)[1]= \(\backslash\)}}
\DoxyCodeLine{73 \textcolor{preprocessor}{                                    (*typecode)[2]=' ',(*typecode)[3]='G')}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 \textcolor{preprocessor}{\#define mm\_initialize\_typecode(typecode) mm\_clear\_typecode(typecode)}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77 }
\DoxyCodeLine{78 \textcolor{comment}{/********************* Matrix Market error codes ***************************/}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 }
\DoxyCodeLine{81 \textcolor{preprocessor}{\#define MM\_COULD\_NOT\_READ\_FILE  11}}
\DoxyCodeLine{82 \textcolor{preprocessor}{\#define MM\_PREMATURE\_EOF        12}}
\DoxyCodeLine{83 \textcolor{preprocessor}{\#define MM\_NOT\_MTX              13}}
\DoxyCodeLine{84 \textcolor{preprocessor}{\#define MM\_NO\_HEADER            14}}
\DoxyCodeLine{85 \textcolor{preprocessor}{\#define MM\_UNSUPPORTED\_TYPE     15}}
\DoxyCodeLine{86 \textcolor{preprocessor}{\#define MM\_LINE\_TOO\_LONG        16}}
\DoxyCodeLine{87 \textcolor{preprocessor}{\#define MM\_COULD\_NOT\_WRITE\_FILE 17}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{comment}{/******************** Matrix Market internal definitions ********************}}
\DoxyCodeLine{91 \textcolor{comment}{}}
\DoxyCodeLine{92 \textcolor{comment}{   MM\_matrix\_typecode: 4-\/character sequence}}
\DoxyCodeLine{93 \textcolor{comment}{}}
\DoxyCodeLine{94 \textcolor{comment}{                    ojbect      sparse/     data        storage }}
\DoxyCodeLine{95 \textcolor{comment}{                                dense       type        scheme}}
\DoxyCodeLine{96 \textcolor{comment}{}}
\DoxyCodeLine{97 \textcolor{comment}{   string position:  [0]        [1]         [2]         [3]}}
\DoxyCodeLine{98 \textcolor{comment}{}}
\DoxyCodeLine{99 \textcolor{comment}{   Matrix typecode:  M(atrix)  C(oord)      R(eal)      G(eneral)}}
\DoxyCodeLine{100 \textcolor{comment}{                                A(array)    C(omplex)   H(ermitian)}}
\DoxyCodeLine{101 \textcolor{comment}{                                            P(attern)   S(ymmetric)}}
\DoxyCodeLine{102 \textcolor{comment}{                                            I(nteger)   K(kew)}}
\DoxyCodeLine{103 \textcolor{comment}{}}
\DoxyCodeLine{104 \textcolor{comment}{ ***********************************************************************/}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \textcolor{keywordtype}{char} MM\_MTX\_STR[]        = \textcolor{stringliteral}{"{}matrix"{}};}
\DoxyCodeLine{107 \textcolor{keywordtype}{char} MM\_ARRAY\_STR[]      = \textcolor{stringliteral}{"{}array"{}};}
\DoxyCodeLine{108 \textcolor{keywordtype}{char} MM\_DENSE\_STR[]      = \textcolor{stringliteral}{"{}array"{}};}
\DoxyCodeLine{109 \textcolor{keywordtype}{char} MM\_COORDINATE\_STR[] = \textcolor{stringliteral}{"{}coordinate"{}}; }
\DoxyCodeLine{110 \textcolor{keywordtype}{char} MM\_SPARSE\_STR[]     = \textcolor{stringliteral}{"{}coordinate"{}};}
\DoxyCodeLine{111 \textcolor{keywordtype}{char} MM\_COMPLEX\_STR[]    = \textcolor{stringliteral}{"{}complex"{}};}
\DoxyCodeLine{112 \textcolor{keywordtype}{char} MM\_REAL\_STR[]       = \textcolor{stringliteral}{"{}real"{}};}
\DoxyCodeLine{113 \textcolor{keywordtype}{char} MM\_INT\_STR[]        = \textcolor{stringliteral}{"{}integer"{}};}
\DoxyCodeLine{114 \textcolor{keywordtype}{char} MM\_GENERAL\_STR[]    = \textcolor{stringliteral}{"{}general"{}};}
\DoxyCodeLine{115 \textcolor{keywordtype}{char} MM\_SYMM\_STR[]       = \textcolor{stringliteral}{"{}symmetric"{}};}
\DoxyCodeLine{116 \textcolor{keywordtype}{char} MM\_HERM\_STR[]       = \textcolor{stringliteral}{"{}hermitian"{}};}
\DoxyCodeLine{117 \textcolor{keywordtype}{char} MM\_SKEW\_STR[]       = \textcolor{stringliteral}{"{}skew-\/symmetric"{}};}
\DoxyCodeLine{118 \textcolor{keywordtype}{char} MM\_PATTERN\_STR[]    = \textcolor{stringliteral}{"{}pattern"{}};}
\DoxyCodeLine{119 }
\DoxyCodeLine{120 }
\DoxyCodeLine{121 \textcolor{keywordtype}{char} *mm\_strdup(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{122 \{}
\DoxyCodeLine{123     \textcolor{keywordtype}{int} len = strlen(s);}
\DoxyCodeLine{124     \textcolor{keywordtype}{char} *s2 = (\textcolor{keywordtype}{char} *) malloc((len+1)*\textcolor{keyword}{sizeof}(char));}
\DoxyCodeLine{125     \textcolor{keywordflow}{return} strcpy(s2, s);}
\DoxyCodeLine{126 \}}
\DoxyCodeLine{127 }
\DoxyCodeLine{128 \textcolor{keywordtype}{char} *mm\_typecode\_to\_str(MM\_typecode matcode)}
\DoxyCodeLine{129 \{}
\DoxyCodeLine{130     \textcolor{keywordtype}{char} buffer[MM\_MAX\_LINE\_LENGTH];}
\DoxyCodeLine{131     \textcolor{keywordtype}{char} *types[4];}
\DoxyCodeLine{132     \textcolor{keywordtype}{char} *mm\_strdup(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *);}
\DoxyCodeLine{133 }
\DoxyCodeLine{134     \textcolor{comment}{/* check for MTX type */}}
\DoxyCodeLine{135     \textcolor{keywordflow}{if} (mm\_is\_matrix(matcode)) }
\DoxyCodeLine{136         types[0] = MM\_MTX\_STR;}
\DoxyCodeLine{137     }
\DoxyCodeLine{138     \textcolor{comment}{/* check for CRD or ARR matrix */}}
\DoxyCodeLine{139     \textcolor{keywordflow}{if} (mm\_is\_sparse(matcode))}
\DoxyCodeLine{140         types[1] = MM\_SPARSE\_STR;}
\DoxyCodeLine{141     \textcolor{keywordflow}{else}}
\DoxyCodeLine{142     \textcolor{keywordflow}{if} (mm\_is\_dense(matcode))}
\DoxyCodeLine{143         types[1] = MM\_DENSE\_STR;}
\DoxyCodeLine{144     \textcolor{keywordflow}{else}}
\DoxyCodeLine{145         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{146 }
\DoxyCodeLine{147     \textcolor{comment}{/* check for element data type */}}
\DoxyCodeLine{148     \textcolor{keywordflow}{if} (mm\_is\_real(matcode))}
\DoxyCodeLine{149         types[2] = MM\_REAL\_STR;}
\DoxyCodeLine{150     \textcolor{keywordflow}{else}}
\DoxyCodeLine{151     \textcolor{keywordflow}{if} (mm\_is\_complex(matcode))}
\DoxyCodeLine{152         types[2] = MM\_COMPLEX\_STR;}
\DoxyCodeLine{153     \textcolor{keywordflow}{else}}
\DoxyCodeLine{154     \textcolor{keywordflow}{if} (mm\_is\_pattern(matcode))}
\DoxyCodeLine{155         types[2] = MM\_PATTERN\_STR;}
\DoxyCodeLine{156     \textcolor{keywordflow}{else}}
\DoxyCodeLine{157     \textcolor{keywordflow}{if} (mm\_is\_integer(matcode))}
\DoxyCodeLine{158         types[2] = MM\_INT\_STR;}
\DoxyCodeLine{159     \textcolor{keywordflow}{else}}
\DoxyCodeLine{160         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{161 }
\DoxyCodeLine{162 }
\DoxyCodeLine{163     \textcolor{comment}{/* check for symmetry type */}}
\DoxyCodeLine{164     \textcolor{keywordflow}{if} (mm\_is\_general(matcode))}
\DoxyCodeLine{165         types[3] = MM\_GENERAL\_STR;}
\DoxyCodeLine{166     \textcolor{keywordflow}{else}}
\DoxyCodeLine{167     \textcolor{keywordflow}{if} (mm\_is\_symmetric(matcode))}
\DoxyCodeLine{168         types[3] = MM\_SYMM\_STR;}
\DoxyCodeLine{169     \textcolor{keywordflow}{else} }
\DoxyCodeLine{170     \textcolor{keywordflow}{if} (mm\_is\_hermitian(matcode))}
\DoxyCodeLine{171         types[3] = MM\_HERM\_STR;}
\DoxyCodeLine{172     \textcolor{keywordflow}{else} }
\DoxyCodeLine{173     \textcolor{keywordflow}{if} (mm\_is\_skew(matcode))}
\DoxyCodeLine{174         types[3] = MM\_SKEW\_STR;}
\DoxyCodeLine{175     \textcolor{keywordflow}{else}}
\DoxyCodeLine{176         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{177 }
\DoxyCodeLine{178     sprintf(buffer,\textcolor{stringliteral}{"{}\%s \%s \%s \%s"{}}, types[0], types[1], types[2], types[3]);}
\DoxyCodeLine{179     \textcolor{keywordflow}{return} mm\_strdup(buffer);}
\DoxyCodeLine{180 }
\DoxyCodeLine{181 \}}
\DoxyCodeLine{182 }
\DoxyCodeLine{183 \textcolor{keywordtype}{int} mm\_read\_banner(FILE *f, MM\_typecode *matcode)}
\DoxyCodeLine{184 \{}
\DoxyCodeLine{185     \textcolor{keywordtype}{char} line[MM\_MAX\_LINE\_LENGTH];}
\DoxyCodeLine{186     \textcolor{keywordtype}{char} banner[MM\_MAX\_TOKEN\_LENGTH];}
\DoxyCodeLine{187     \textcolor{keywordtype}{char} mtx[MM\_MAX\_TOKEN\_LENGTH]; }
\DoxyCodeLine{188     \textcolor{keywordtype}{char} crd[MM\_MAX\_TOKEN\_LENGTH];}
\DoxyCodeLine{189     \textcolor{keywordtype}{char} data\_type[MM\_MAX\_TOKEN\_LENGTH];}
\DoxyCodeLine{190     \textcolor{keywordtype}{char} storage\_scheme[MM\_MAX\_TOKEN\_LENGTH];}
\DoxyCodeLine{191     \textcolor{keywordtype}{char} *p;}
\DoxyCodeLine{192 }
\DoxyCodeLine{193 }
\DoxyCodeLine{194     mm\_clear\_typecode(matcode);  }
\DoxyCodeLine{195 }
\DoxyCodeLine{196     \textcolor{keywordflow}{if} (fgets(line, MM\_MAX\_LINE\_LENGTH, f) == NULL) }
\DoxyCodeLine{197         \textcolor{keywordflow}{return} MM\_PREMATURE\_EOF;}
\DoxyCodeLine{198 }
\DoxyCodeLine{199     \textcolor{keywordflow}{if} (sscanf(line, \textcolor{stringliteral}{"{}\%s \%s \%s \%s \%s"{}}, banner, mtx, crd, data\_type, }
\DoxyCodeLine{200         storage\_scheme) != 5)}
\DoxyCodeLine{201         \textcolor{keywordflow}{return} MM\_PREMATURE\_EOF;}
\DoxyCodeLine{202 }
\DoxyCodeLine{203     \textcolor{keywordflow}{for} (p=mtx; *p!=\textcolor{charliteral}{'\(\backslash\)0'}; *p=tolower(*p),p++);  \textcolor{comment}{/* convert to lower case */}}
\DoxyCodeLine{204     \textcolor{keywordflow}{for} (p=crd; *p!=\textcolor{charliteral}{'\(\backslash\)0'}; *p=tolower(*p),p++);  }
\DoxyCodeLine{205     \textcolor{keywordflow}{for} (p=data\_type; *p!=\textcolor{charliteral}{'\(\backslash\)0'}; *p=tolower(*p),p++);}
\DoxyCodeLine{206     \textcolor{keywordflow}{for} (p=storage\_scheme; *p!=\textcolor{charliteral}{'\(\backslash\)0'}; *p=tolower(*p),p++);}
\DoxyCodeLine{207 }
\DoxyCodeLine{208     \textcolor{comment}{/* check for banner */}}
\DoxyCodeLine{209     \textcolor{keywordflow}{if} (strncmp(banner, MatrixMarketBanner, strlen(MatrixMarketBanner)) != 0)}
\DoxyCodeLine{210         \textcolor{keywordflow}{return} MM\_NO\_HEADER;}
\DoxyCodeLine{211 }
\DoxyCodeLine{212     \textcolor{comment}{/* first field should be "{}mtx"{} */}}
\DoxyCodeLine{213     \textcolor{keywordflow}{if} (strcmp(mtx, MM\_MTX\_STR) != 0)}
\DoxyCodeLine{214         \textcolor{keywordflow}{return}  MM\_UNSUPPORTED\_TYPE;}
\DoxyCodeLine{215     mm\_set\_matrix(matcode);}
\DoxyCodeLine{216 }
\DoxyCodeLine{217 }
\DoxyCodeLine{218     \textcolor{comment}{/* second field describes whether this is a sparse matrix (in coordinate}}
\DoxyCodeLine{219 \textcolor{comment}{            storgae) or a dense array */}}
\DoxyCodeLine{220 }
\DoxyCodeLine{221 }
\DoxyCodeLine{222     \textcolor{keywordflow}{if} (strcmp(crd, MM\_SPARSE\_STR) == 0)}
\DoxyCodeLine{223         mm\_set\_sparse(matcode);}
\DoxyCodeLine{224     \textcolor{keywordflow}{else}}
\DoxyCodeLine{225     \textcolor{keywordflow}{if} (strcmp(crd, MM\_DENSE\_STR) == 0)}
\DoxyCodeLine{226             mm\_set\_dense(matcode);}
\DoxyCodeLine{227     \textcolor{keywordflow}{else}}
\DoxyCodeLine{228         \textcolor{keywordflow}{return} MM\_UNSUPPORTED\_TYPE;}
\DoxyCodeLine{229     }
\DoxyCodeLine{230 }
\DoxyCodeLine{231     \textcolor{comment}{/* third field */}}
\DoxyCodeLine{232 }
\DoxyCodeLine{233     \textcolor{keywordflow}{if} (strcmp(data\_type, MM\_REAL\_STR) == 0)}
\DoxyCodeLine{234         mm\_set\_real(matcode);}
\DoxyCodeLine{235     \textcolor{keywordflow}{else}}
\DoxyCodeLine{236     \textcolor{keywordflow}{if} (strcmp(data\_type, MM\_COMPLEX\_STR) == 0)}
\DoxyCodeLine{237         mm\_set\_complex(matcode);}
\DoxyCodeLine{238     \textcolor{keywordflow}{else}}
\DoxyCodeLine{239     \textcolor{keywordflow}{if} (strcmp(data\_type, MM\_PATTERN\_STR) == 0)}
\DoxyCodeLine{240         mm\_set\_pattern(matcode);}
\DoxyCodeLine{241     \textcolor{keywordflow}{else}}
\DoxyCodeLine{242     \textcolor{keywordflow}{if} (strcmp(data\_type, MM\_INT\_STR) == 0)}
\DoxyCodeLine{243         mm\_set\_integer(matcode);}
\DoxyCodeLine{244     \textcolor{keywordflow}{else}}
\DoxyCodeLine{245         \textcolor{keywordflow}{return} MM\_UNSUPPORTED\_TYPE;}
\DoxyCodeLine{246     }
\DoxyCodeLine{247 }
\DoxyCodeLine{248     \textcolor{comment}{/* fourth field */}}
\DoxyCodeLine{249 }
\DoxyCodeLine{250     \textcolor{keywordflow}{if} (strcmp(storage\_scheme, MM\_GENERAL\_STR) == 0)}
\DoxyCodeLine{251         mm\_set\_general(matcode);}
\DoxyCodeLine{252     \textcolor{keywordflow}{else}}
\DoxyCodeLine{253     \textcolor{keywordflow}{if} (strcmp(storage\_scheme, MM\_SYMM\_STR) == 0)}
\DoxyCodeLine{254         mm\_set\_symmetric(matcode);}
\DoxyCodeLine{255     \textcolor{keywordflow}{else}}
\DoxyCodeLine{256     \textcolor{keywordflow}{if} (strcmp(storage\_scheme, MM\_HERM\_STR) == 0)}
\DoxyCodeLine{257         mm\_set\_hermitian(matcode);}
\DoxyCodeLine{258     \textcolor{keywordflow}{else}}
\DoxyCodeLine{259     \textcolor{keywordflow}{if} (strcmp(storage\_scheme, MM\_SKEW\_STR) == 0)}
\DoxyCodeLine{260         mm\_set\_skew(matcode);}
\DoxyCodeLine{261     \textcolor{keywordflow}{else}}
\DoxyCodeLine{262         \textcolor{keywordflow}{return} MM\_UNSUPPORTED\_TYPE;}
\DoxyCodeLine{263         }
\DoxyCodeLine{264 }
\DoxyCodeLine{265     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{266 \}}
\DoxyCodeLine{267 }
\DoxyCodeLine{268 \textcolor{keywordtype}{int} mm\_read\_mtx\_crd\_size(FILE *f, \textcolor{keywordtype}{int} *M, \textcolor{keywordtype}{int} *N, \textcolor{keywordtype}{int} *nz )}
\DoxyCodeLine{269 \{}
\DoxyCodeLine{270     \textcolor{keywordtype}{char} line[MM\_MAX\_LINE\_LENGTH];}
\DoxyCodeLine{271     \textcolor{keywordtype}{int} num\_items\_read;}
\DoxyCodeLine{272 }
\DoxyCodeLine{273     \textcolor{comment}{/* set return null parameter values, in case we exit with errors */}}
\DoxyCodeLine{274     *M = *N = *nz = 0;}
\DoxyCodeLine{275 }
\DoxyCodeLine{276     \textcolor{comment}{/* now continue scanning until you reach the end-\/of-\/comments */}}
\DoxyCodeLine{277     \textcolor{keywordflow}{do} }
\DoxyCodeLine{278     \{}
\DoxyCodeLine{279         \textcolor{keywordflow}{if} (fgets(line,MM\_MAX\_LINE\_LENGTH,f) == NULL) }
\DoxyCodeLine{280             \textcolor{keywordflow}{return} MM\_PREMATURE\_EOF;}
\DoxyCodeLine{281     \}\textcolor{keywordflow}{while} (line[0] == \textcolor{charliteral}{'\%'});}
\DoxyCodeLine{282 }
\DoxyCodeLine{283     \textcolor{comment}{/* line[] is either blank or has M,N, nz */}}
\DoxyCodeLine{284     \textcolor{keywordflow}{if} (sscanf(line, \textcolor{stringliteral}{"{}\%d \%d \%d"{}}, M, N, nz) == 3)}
\DoxyCodeLine{285         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{286         }
\DoxyCodeLine{287     \textcolor{keywordflow}{else}}
\DoxyCodeLine{288     \textcolor{keywordflow}{do}}
\DoxyCodeLine{289     \{ }
\DoxyCodeLine{290         num\_items\_read = fscanf(f, \textcolor{stringliteral}{"{}\%d \%d \%d"{}}, M, N, nz); }
\DoxyCodeLine{291         \textcolor{keywordflow}{if} (num\_items\_read == EOF) \textcolor{keywordflow}{return} MM\_PREMATURE\_EOF;}
\DoxyCodeLine{292     \}}
\DoxyCodeLine{293     \textcolor{keywordflow}{while} (num\_items\_read != 3);}
\DoxyCodeLine{294 }
\DoxyCodeLine{295     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{296 \}}
\DoxyCodeLine{297 }
\DoxyCodeLine{298 \textcolor{keywordtype}{int} mm\_read\_mtx\_array\_size(FILE *f, \textcolor{keywordtype}{int} *M, \textcolor{keywordtype}{int} *N)}
\DoxyCodeLine{299 \{}
\DoxyCodeLine{300     \textcolor{keywordtype}{char} line[MM\_MAX\_LINE\_LENGTH];}
\DoxyCodeLine{301     \textcolor{keywordtype}{int} num\_items\_read;}
\DoxyCodeLine{302     \textcolor{comment}{/* set return null parameter values, in case we exit with errors */}}
\DoxyCodeLine{303     *M = *N = 0;}
\DoxyCodeLine{304     }
\DoxyCodeLine{305     \textcolor{comment}{/* now continue scanning until you reach the end-\/of-\/comments */}}
\DoxyCodeLine{306     \textcolor{keywordflow}{do} }
\DoxyCodeLine{307     \{}
\DoxyCodeLine{308         \textcolor{keywordflow}{if} (fgets(line,MM\_MAX\_LINE\_LENGTH,f) == NULL) }
\DoxyCodeLine{309             \textcolor{keywordflow}{return} MM\_PREMATURE\_EOF;}
\DoxyCodeLine{310     \}\textcolor{keywordflow}{while} (line[0] == \textcolor{charliteral}{'\%'});}
\DoxyCodeLine{311 }
\DoxyCodeLine{312     \textcolor{comment}{/* line[] is either blank or has M,N, nz */}}
\DoxyCodeLine{313     \textcolor{keywordflow}{if} (sscanf(line, \textcolor{stringliteral}{"{}\%d \%d"{}}, M, N) == 2)}
\DoxyCodeLine{314         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{315         }
\DoxyCodeLine{316     \textcolor{keywordflow}{else} \textcolor{comment}{/* we have a blank line */}}
\DoxyCodeLine{317     \textcolor{keywordflow}{do}}
\DoxyCodeLine{318     \{ }
\DoxyCodeLine{319         num\_items\_read = fscanf(f, \textcolor{stringliteral}{"{}\%d \%d"{}}, M, N); }
\DoxyCodeLine{320         \textcolor{keywordflow}{if} (num\_items\_read == EOF) \textcolor{keywordflow}{return} MM\_PREMATURE\_EOF;}
\DoxyCodeLine{321     \}}
\DoxyCodeLine{322     \textcolor{keywordflow}{while} (num\_items\_read != 2);}
\DoxyCodeLine{323 }
\DoxyCodeLine{324     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{325 \}}
\DoxyCodeLine{326 }
\DoxyCodeLine{327 \textcolor{comment}{//int mm\_write\_banner(FILE *f, MM\_typecode matcode);}}
\DoxyCodeLine{328 \textcolor{comment}{//int mm\_write\_mtx\_crd\_size(FILE *f, int M, int N, int nz);}}
\DoxyCodeLine{329 \textcolor{comment}{//int mm\_write\_mtx\_array\_size(FILE *f, int M, int N);}}
\DoxyCodeLine{330 }
\DoxyCodeLine{331 \textcolor{comment}{/*  high level routines */}}
\DoxyCodeLine{332 }
\DoxyCodeLine{333 \textcolor{comment}{//int mm\_write\_mtx\_crd(char fname[], int M, int N, int nz, int I[], int J[],}}
\DoxyCodeLine{334 \textcolor{comment}{//       double val[], MM\_typecode matcode);}}
\DoxyCodeLine{335 \textcolor{comment}{//int mm\_read\_mtx\_crd\_data(FILE *f, int M, int N, int nz, int I[], int J[],}}
\DoxyCodeLine{336 \textcolor{comment}{//      double val[], MM\_typecode matcode);}}
\DoxyCodeLine{337 \textcolor{comment}{//int mm\_read\_mtx\_crd\_entry(FILE *f, int *I, int *J, double *real, double *img,}}
\DoxyCodeLine{338 \textcolor{comment}{//          MM\_typecode matcode);}}
\DoxyCodeLine{339 }
\DoxyCodeLine{340 \textcolor{comment}{//int mm\_read\_unsymmetric\_sparse(const char *fname, int *M\_, int *N\_, int *nz\_,}}
\DoxyCodeLine{341 \textcolor{comment}{//                double **val\_, int **I\_, int **J\_);}}
\DoxyCodeLine{342 }
\DoxyCodeLine{343 }
\DoxyCodeLine{344 }
\DoxyCodeLine{345 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
