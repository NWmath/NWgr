\hypertarget{plain__range_8hpp_source}{}\doxysection{plain\+\_\+range.\+hpp}
\label{plain__range_8hpp_source}\index{/Users/lums/NWmath/NWgr/include/nwgraph/adaptors/plain\_range.hpp@{/Users/lums/NWmath/NWgr/include/nwgraph/adaptors/plain\_range.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// }}
\DoxyCodeLine{2 \textcolor{comment}{// This file is part of NW Graph (aka GraphPack) }}
\DoxyCodeLine{3 \textcolor{comment}{// (c) Pacific Northwest National Laboratory 2018-\/2021 }}
\DoxyCodeLine{4 \textcolor{comment}{// (c) University of Washington 2018-\/2021 }}
\DoxyCodeLine{5 \textcolor{comment}{// }}
\DoxyCodeLine{6 \textcolor{comment}{// Licensed under terms of include LICENSE file }}
\DoxyCodeLine{7 \textcolor{comment}{// }}
\DoxyCodeLine{8 \textcolor{comment}{// Authors: }}
\DoxyCodeLine{9 \textcolor{comment}{//     Andrew Lumsdaine }}
\DoxyCodeLine{10 \textcolor{comment}{//     Kevin Deweese    }}
\DoxyCodeLine{11 \textcolor{comment}{//}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#ifndef NW\_GRAPH\_PLAIN\_RANGE\_HPP}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#define NW\_GRAPH\_PLAIN\_RANGE\_HPP}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}nwgraph/graph\_traits.hpp"{}}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include "{}nwgraph/util/print\_types.hpp"{}}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}nwgraph/util/util.hpp"{}}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include <queue>}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <tuple>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{preprocessor}{\#if defined(CL\_SYCL\_LANGUAGE\_VERSION)}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include <dpstd/execution>}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include <execution>}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 \textcolor{keyword}{namespace }nw \{}
\DoxyCodeLine{32 \textcolor{keyword}{namespace }graph \{}
\DoxyCodeLine{33 }
\DoxyCodeLine{34 \textcolor{keyword}{template} <\textcolor{keyword}{class }Graph, std::size\_t... Is>}
\DoxyCodeLine{35 \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}} \{}
\DoxyCodeLine{36   \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} cutoff\_ = 16;}
\DoxyCodeLine{37 }
\DoxyCodeLine{38   \textcolor{keyword}{using} vertex\_id\_type = vertex\_id\_t<Graph>;}
\DoxyCodeLine{39 }
\DoxyCodeLine{40   \textcolor{keyword}{using} graph\_iterator = \textcolor{keyword}{typename} std::conditional<std::is\_const\_v<Graph>, \textcolor{keyword}{typename} Graph::const\_iterator, \textcolor{keyword}{typename} Graph::iterator>::type;}
\DoxyCodeLine{41 }
\DoxyCodeLine{42   graph\_iterator outer\_base\_;}
\DoxyCodeLine{43   graph\_iterator outer\_begin\_;}
\DoxyCodeLine{44   graph\_iterator outer\_end\_;}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{keyword}{public}:}
\DoxyCodeLine{47   \mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}(Graph\& g, std::size\_t offset) : outer\_base\_(g.begin()), outer\_begin\_(g.begin() + offset), outer\_end\_(g.end()) \{\}}
\DoxyCodeLine{48 }
\DoxyCodeLine{49   \mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}(Graph\& g) : \mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}(g, 0) \{\}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51   \textcolor{comment}{// Split a range.}}
\DoxyCodeLine{52   \mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}(\mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}\& b, tbb::split) : \mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}(b) \{}
\DoxyCodeLine{53     \textcolor{keyword}{auto} i = (outer\_end\_ -\/ outer\_begin\_) / 2;}
\DoxyCodeLine{54     outer\_begin\_ += i;}
\DoxyCodeLine{55     b.outer\_end\_ = b.outer\_begin\_ + i;}
\DoxyCodeLine{56   \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58   \mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{59   \mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}\& operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range}{plain\_range}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61   \textcolor{keyword}{template} <\textcolor{keywordtype}{bool} is\_const = false>}
\DoxyCodeLine{62   \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}} \{}
\DoxyCodeLine{63   \textcolor{keyword}{public}:}
\DoxyCodeLine{64     \textcolor{keyword}{using} iterator\_category = std::forward\_iterator\_tag;}
\DoxyCodeLine{65     \textcolor{keyword}{using} value\_type        = std::tuple<vertex\_id\_type>;}
\DoxyCodeLine{66     \textcolor{keyword}{using} difference\_type   = std::size\_t;}
\DoxyCodeLine{67     \textcolor{keyword}{using} reference         = value\_type\&;}
\DoxyCodeLine{68     \textcolor{keyword}{using} pointer           = value\_type*;}
\DoxyCodeLine{69 }
\DoxyCodeLine{70   \textcolor{keyword}{private}:}
\DoxyCodeLine{71     graph\_iterator base\_;     }
\DoxyCodeLine{72     graph\_iterator first\_;    }
\DoxyCodeLine{73     graph\_iterator last\_;     }
\DoxyCodeLine{74 }
\DoxyCodeLine{75     \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\& b, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} step) : \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}(b) \{ first\_ += step; \}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77   \textcolor{keyword}{public}:}
\DoxyCodeLine{78     \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}(graph\_iterator base, graph\_iterator begin, graph\_iterator end) : base\_(base), first\_(begin), last\_(end) \{\}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80     \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{81     \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\& operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\& b) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \textcolor{keyword}{template} <\textcolor{keywordtype}{bool} was\_const, \textcolor{keyword}{class} = std::enable\_if\_t<is\_const \&\& !was\_const>>}
\DoxyCodeLine{84     \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator<was\_const>}}\& rhs) : base\_(rhs.base\_), first\_(rhs.first\_), last\_(rhs.last\_) \{\}}
\DoxyCodeLine{85 }
\DoxyCodeLine{86     \textcolor{keyword}{template} <\textcolor{keywordtype}{bool} was\_const, \textcolor{keyword}{class} = std::enable\_if\_t<is\_const \&\& !was\_const>>}
\DoxyCodeLine{87     \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\& operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator<was\_const>}}\& rhs) \{}
\DoxyCodeLine{88       base\_  = rhs.base\_;}
\DoxyCodeLine{89       first\_ = rhs.first\_;}
\DoxyCodeLine{90       last\_  = rhs.last\_;}
\DoxyCodeLine{91       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{92     \}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\& operator++() \{}
\DoxyCodeLine{95       ++first\_;}
\DoxyCodeLine{96       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     \textcolor{keyword}{auto} operator*() \{ \textcolor{keywordflow}{return} std::tuple(first\_ -\/ base\_); \}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101     \textcolor{keyword}{auto} operator*()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} std::tuple(first\_ -\/ base\_); \}}
\DoxyCodeLine{102 }
\DoxyCodeLine{103     \textcolor{keywordtype}{bool} operator==(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\& b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} first\_ == b.first\_; \}}
\DoxyCodeLine{104     \textcolor{keywordtype}{bool} operator!=(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\& b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} first\_ != b.first\_; \}}
\DoxyCodeLine{105     \textcolor{keywordtype}{bool} operator<(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\& b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} first\_ < b.first\_; \}}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     difference\_type operator-\/(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}\& b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} first\_ -\/ b.first\_; \}}
\DoxyCodeLine{108     \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}     operator+(difference\_type step)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator}}(*\textcolor{keyword}{this}, step); \}}
\DoxyCodeLine{109   \};}
\DoxyCodeLine{110 }
\DoxyCodeLine{111   \textcolor{keyword}{using} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{iterator}}       = \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator<false>}};}
\DoxyCodeLine{112   \textcolor{keyword}{using} \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{const\_iterator}} = \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{my\_iterator<true>}};}
\DoxyCodeLine{113 }
\DoxyCodeLine{114   \mbox{\hyperlink{classnw_1_1graph_1_1plain__range_1_1my__iterator}{iterator}}       begin() \{ \textcolor{keywordflow}{return} \{outer\_base\_, outer\_begin\_, outer\_end\_\}; \}}
\DoxyCodeLine{115   const\_iterator begin()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \{outer\_base\_, outer\_begin\_, outer\_end\_\}; \}}
\DoxyCodeLine{116 }
\DoxyCodeLine{117   iterator       end() \{ \textcolor{keywordflow}{return} \{outer\_base\_, outer\_end\_, outer\_end\_\}; \}}
\DoxyCodeLine{118   const\_iterator end()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \{outer\_base\_, outer\_end\_, outer\_end\_\}; \}}
\DoxyCodeLine{119 }
\DoxyCodeLine{120   std::size\_t size()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} outer\_end\_ -\/ outer\_begin\_; \}}
\DoxyCodeLine{121   \textcolor{keywordtype}{bool}        empty()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} begin() == end(); \}}
\DoxyCodeLine{122   \textcolor{keywordtype}{bool}        is\_divisible()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} size() > cutoff\_; \}}
\DoxyCodeLine{123 \};}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 \textcolor{keyword}{template} <\textcolor{keyword}{class }Graph, std::size\_t... Is>}
\DoxyCodeLine{126 \textcolor{keyword}{static} \textcolor{keyword}{inline} \mbox{\hyperlink{classplain__range}{plain\_range}}<Graph, Is...> make\_plain\_range(Graph\& g, std::size\_t offset) \{}
\DoxyCodeLine{127   \textcolor{keywordflow}{return} \{g, offset\};}
\DoxyCodeLine{128 \}}
\DoxyCodeLine{129 }
\DoxyCodeLine{130 \textcolor{keyword}{template} <\textcolor{keyword}{class }Graph, std::size\_t... Is>}
\DoxyCodeLine{131 \textcolor{keyword}{static} \textcolor{keyword}{inline} \mbox{\hyperlink{classplain__range}{plain\_range}}<Graph, Is...> make\_plain\_range(Graph\& g) \{}
\DoxyCodeLine{132   \textcolor{keywordflow}{return} \{g\};}
\DoxyCodeLine{133 \}}
\DoxyCodeLine{134 }
\DoxyCodeLine{135 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Graph>}
\DoxyCodeLine{136 \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1plain__degree__range}{plain\_degree\_range}} \{}
\DoxyCodeLine{137 \textcolor{keyword}{public}:}
\DoxyCodeLine{138   \mbox{\hyperlink{classnw_1_1graph_1_1plain__degree__range}{plain\_degree\_range}}(Graph\& g) : the\_graph\_(g) \{\}}
\DoxyCodeLine{139 }
\DoxyCodeLine{140   \textcolor{keyword}{class }\mbox{\hyperlink{classnw_1_1graph_1_1plain__degree__range_1_1iterator}{iterator}} \{}
\DoxyCodeLine{141     \textcolor{keyword}{typename} Graph::iterator base\_;}
\DoxyCodeLine{142     \textcolor{keyword}{typename} Graph::iterator first\_;}
\DoxyCodeLine{143     \textcolor{keyword}{typename} Graph::iterator last\_;}
\DoxyCodeLine{144 }
\DoxyCodeLine{145   \textcolor{keyword}{public}:}
\DoxyCodeLine{146     \mbox{\hyperlink{classnw_1_1graph_1_1plain__degree__range_1_1iterator}{iterator}}(\textcolor{keyword}{typename} Graph::iterator base, \textcolor{keyword}{typename} Graph::iterator first, \textcolor{keyword}{typename} Graph::iterator last)}
\DoxyCodeLine{147         : base\_(base), first\_(first), last\_(last) \{\}}
\DoxyCodeLine{148 }
\DoxyCodeLine{149     \mbox{\hyperlink{classnw_1_1graph_1_1plain__degree__range_1_1iterator}{iterator}}(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__degree__range_1_1iterator}{iterator}}\& b) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{150 }
\DoxyCodeLine{151     \mbox{\hyperlink{classnw_1_1graph_1_1plain__degree__range_1_1iterator}{iterator}}\& operator++() \{}
\DoxyCodeLine{152       ++first\_;}
\DoxyCodeLine{153       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{154     \}}
\DoxyCodeLine{155 }
\DoxyCodeLine{156     \textcolor{keyword}{auto} operator*() \{ \textcolor{keywordflow}{return} std::tuple(first\_ -\/ base\_, (*first\_).size()); \}}
\DoxyCodeLine{157 }
\DoxyCodeLine{158     \textcolor{keywordtype}{bool} operator==(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__degree__range_1_1iterator}{iterator}}\& b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} first\_ == b.first\_; \}}
\DoxyCodeLine{159     \textcolor{keywordtype}{bool} operator!=(\textcolor{keyword}{const} \mbox{\hyperlink{classnw_1_1graph_1_1plain__degree__range_1_1iterator}{iterator}}\& b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} first\_ != b.first\_; \}}
\DoxyCodeLine{160   \};}
\DoxyCodeLine{161 }
\DoxyCodeLine{162   std::size\_t size()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} the\_graph\_.size(); \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164   iterator begin() \{ \textcolor{keywordflow}{return} \{the\_graph\_.begin(), the\_graph\_.begin(), the\_graph\_.end()\}; \}}
\DoxyCodeLine{165   iterator end() \{ \textcolor{keywordflow}{return} \{the\_graph\_.begin(), the\_graph\_.end(), the\_graph\_.end()\}; \}}
\DoxyCodeLine{166 }
\DoxyCodeLine{167 \textcolor{keyword}{private}:}
\DoxyCodeLine{168   Graph\& the\_graph\_;}
\DoxyCodeLine{169 \};}
\DoxyCodeLine{170 }
\DoxyCodeLine{171 \}    \textcolor{comment}{// namespace graph}}
\DoxyCodeLine{172 \}    \textcolor{comment}{// namespace nw}}
\DoxyCodeLine{173 }
\DoxyCodeLine{174 \textcolor{preprocessor}{\#endif    }\textcolor{comment}{// NW\_GRAPH\_PLAIN\_RANGE\_HPP}}

\end{DoxyCode}
