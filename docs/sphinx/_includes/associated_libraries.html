

{% set siblings = (pagename | siblings) %}
{% set sub_libs = (siblings | layout_library) %}
{% set libraries = (sub_libs | library_library) %}
{% set sourcefiles = (sub_libs | library_sourcefile ) %}

{% if (sourcefiles|length ) > 0 %}
<h3>Sources</h3>
<table class='associated-table'>
  {% for k,v in (sourcefiles|dictsort) %}
    {% set p = v[0] %}
    <tr>
        <td class='name'>
          <div><a href="{{k|relpath}}/index.html"><code>{{ p.title | escape }}</code></a></div>
        </td>
        <td class='brief'>
            {% if p.brief %}
                {{ p.brief | markdownify }}
            {% elif p.description %}
                {{ p.description | markdownify }}
            {% else %}
                {{ '_No details given_' | markdownify }}
            {% endif %}
            {% if p.annotation %}
                <span class='annotation'>({{p.annotation | join(", ")}})</span>
            {% endif %}
        </td>
    </tr>
  {% endfor %}
</table>
{% endif %}


{% if (libraries|length) > 0 %}
<h3>Subcomponents</h3>
<table class='associated-table'>
  {% for k,v in libraries.items() %}
    {% set p = v[0] %}
    <tr>
        <td class='name'>
          <div><a href="{{k}}">{{ p.title | escape }}</a></div>
        </td>
        <td class='brief'>
            {% if p.brief %}
                {{ p.brief | markdownify }}
            {% elif p.description %}
                {{ p.description | markdownify }}
            {% else %}
                {{ '_No details given_' | markdownify }}
            {% endif %}
            {% if p.annotation %}
                <span class='annotation'>({{p.annotation | join(", ")}})</span>
            {% endif %}
        </td>
    </tr>
  {% endfor %}
</table>
{% endif %}
